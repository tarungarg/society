<%= render partial: 'votes/header/header'%>


<section class="content">
  <div class="row">
    <div class="col-md-12">
      <div class="box box-warning">
        <!-- /.box-header -->
        <div class="box-body">
          <table class="table table-bordered">
            <tr>
              <th>#</th>
              <th>Name</th>
              <th>Number</th>
              <th>Role</th>
              <th colspan="3"></th>
            </tr>
            <% cache [current_user.id, @users] do %>
              <% @users.each_with_index do |member, index| %>
                <tr>
                  <td><%= index + 1  %></td>
                  <td><%= member.name %></td>
                  <td><%= member.mob_num %></td>
                  <td><%= member.roles.collect{|m| m.name.camelize}.join(', ') %></td>
                  <td>
                    <span id="mark-as-pres">
                      <%=render partial: 'members/partials/select_candidate', locals: { member: member} %>
                    </span>
                  </td>
                    <td>
                      <span id="vote-pre-<%=member.id%> voter-pre">
                        <%= render partial: 'votes/partials/vote', locals: { member: member} %>
                      </span>
                    </td>
                </tr>
              <% end %>
            <% end %>
          </table>
        </div>

      </div>
    </div>
  </div>
</section>
